#!/usr/bin/env python3

import argparse
import sys

from rtt_ros2_idl import generate_typekit

def main(argv=sys.argv[1:]):
    parser = argparse.ArgumentParser(
        description='Generate an RTT typekit from message, service and action types in a ROS message package.',
        formatter_class=argparse.ArgumentDefaultsHelpFormatter)
    parser.add_argument(
        '--package', required=True,
        help='The name of the package')
    parser.add_argument(
        '--messages', metavar='MESSAGE', nargs='*',
        help='The message types to generate typekit for')
    parser.add_argument(
        '--services', metavar='SERVICE', nargs='*',
        help='The service types to generate typekit for')
    parser.add_argument(
        '--actions', metavar='ACTION', nargs='*',
        help='The action types to generate typekit for')
    parser.add_argument(
        '--output-dir', required=True,
        help='The base directory to create typekit files in')
    args = parser.parse_args(argv)

    return generate_typekit(**vars(args))

if __name__ == '__main__':
    sys.exit(main())
